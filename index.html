<script>
    async function generatePDF() {
        const { jsPDF } = window.jspdf;
        const doc = new jsPDF({
            orientation: 'portrait',
            unit: 'px',
            format: 'a4'
        });

        // Load the background image
        const img = new Image();
        img.src = 'hall-pass-bg-a.png'; // Make sure the uploaded image matches this name or use the uploaded path

        img.onload = function () {
            const pageWidth = doc.internal.pageSize.getWidth();
            const pageHeight = doc.internal.pageSize.getHeight();

            // Add image as full-page background
            doc.addImage(img, 'PNG', 0, 0, pageWidth, pageHeight);

            // Get input values
            const teacher = document.getElementById("teacher").value;
            const section = document.getElementById("section").value;

            // Combine into a single line or two lines as needed
            const label = `${teacher} - ${section}`;

            // Set text style
            doc.setFont('Helvetica', 'bold');
            doc.setFontSize(26); // Make it large
            doc.setTextColor(255, 255, 255); // White text

            // Calculate text width to center it
            const textWidth = doc.getTextWidth(label);
            const x = (pageWidth - textWidth) / 2;
            const y = 860; // Adjust based on the position of the black bar (test and tweak this)

            // Draw text on black bar
            doc.text(label, x, y);

            // Save PDF
            doc.save("hall-pass.pdf");
        };
    }
</script>
